# Домашнее задание к занятию «Базы данных, их типы»
Иванов Владислав


### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать 
правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для
каждой предметной области. 

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы? 

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к 
маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это 
реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать
со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД 
логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

*Приведите ответ в свободной форме.*

---

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

*Приведите ответ в свободной форме.*

---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL. 

3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

*Приведите ответ в свободной форме.*

---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу 
выделено 1000 машин. 

На основе какого критерия будете выбирать тип СУБД и какая модель *распределённых вычислений* 
здесь справится лучше всего и почему?

*Приведите ответ в свободной форме.*



##Решение 

1.1 Бюджетирование проектов и финансовые отчёты

Рекомендуемая СУБД: Реляционная СУБД (PostgreSQL, Oracle, Microsoft SQL Server)

Причины:
Чёткая структура данных с жёсткой схемой
Поддержка ACID-транзакций для гарантии целостности
Мощные инструменты аналитики (оконные функции, материализованные представления)
Встроенные механизмы для сложных расчётов и прогнозирования

1.1. Для ускорения хеширования:*

Использовать специализированные API: OpenSSL Crypto API, Microsoft CNG API
Либо аппаратные ускорители

1.2 Лендинги и CRM

Рекомендуемые СУБД:
Для лендингов: Документо-ориентированная NoSQL (MongoDB)
Для CRM: Можно использовать ту же MongoDB или специализированные CRM-решения (Salesforce, HubSpot)

Причины:
Гибкость схемы данных (разные проекты могут требовать разных полей)
Быстрая запись и чтение
Горизонтальная масштабируемость

1.2. Единое решение:*

Можно использовать MongoDB как единую СУБД для обеих задач
Реализация: разные коллекции для лендингов и CRM-данных
Альтернатива: PostgreSQL с JSONB-полями для гибкости

1.3 База знаний отдела контроля качества

Рекомендуемая СУБД: Реляционная СУБД (MySQL, PostgreSQL)

Причины:
Простая и понятная структура
Лёгкость администрирования
Хорошая интеграция с корпоративными системами

1.3. Использование существующей СУБД:*

Можно использовать ту же PostgreSQL, что и в п.1.1
Реализация: отдельная схема (schema) для данных контроля качества

1.4 Логистика и маршрутизация

Рекомендуемая СУБД: Графовая СУБД (Neo4j)

Причины:
Оптимальна для работы со связями (маршруты, узлы)
Быстрый поиск оптимальных путей
Наглядное представление данных

1.4. Интеграция с отделом закупок:*

Лучше использовать отдельную СУБД для закупок (реляционную)
Связь через API или интеграционный слой
Альтернатива: расширить графовую модель для включения данных закупок

1.5.* Универсальное решение

Я бы использовал PostgreSQL с расширениями

Почему:
Реляционная модель для структурированных данных (финансы, контроль качества)
Поддержка JSONB для гибких данных (лендинги, CRM)
Возможность подключения расширения pgRouting для задач логистики
Единая точка администрирования и резервного копирования

Задание 2. Транзакции

2.1 Пополнение баланса телефона

Начало транзакции: Система начинает транзакцию
Проверка данных: Валидация номера телефона и суммы
Списание средств: Уменьшение баланса плательщика
Зачисление средств: Увеличение баланса телефона
Логирование: Запись о транзакции в журнал операций
Фиксация транзакции: Подтверждение успешного завершения

2.1. Автоплатёж:*

Планирование: Система проверяет расписание автоплатежей
Проверка средств: Подтверждение достаточности средств
Выполнение платежа: Автоматическое повторение шагов 1-6 из обычной транзакции
Уведомление: Отправка подтверждения пользователю
Обработка ошибок: Если что-то пошло не так - повтор или уведомление

Задание 3. SQL vs NoSQL

3.1 Преимущества SQL перед NoSQL:

Строгая согласованность данных (ACID)
Сложные запросы (JOIN, подзапросы, агрегации)
Зрелость технологий (проверенные решения)
Стандартизированный язык запросов (SQL)
Лучшая поддержка транзакций (межтабличные операции)

3.1. Преимущества NewSQL:*

Масштабируемость NoSQL + гарантии ACID SQL
Горизонтальное масштабирование без потери согласованности
Упрощённое управление по сравнению с шардированными SQL-кластерами
Поддержка распределённых транзакций
Современные архитектурные решения

Задание 4. Кластеры для больших данных

Критерии выбора СУБД:
Горизонтальная масштабируемость (возможность добавлять узлы)
Отказоустойчивость (репликация данных)
Поддержка распределённых вычислений (MapReduce, Spark)
Локализация данных (data locality для уменьшения сетевого трафика)
Баланс между согласованностью и доступностью (CAP-теорема)

Рекомендуемая модель:
СУБД: Apache Cassandra + Apache Spark

Почему:
Cassandra обеспечивает отказоустойчивое хранение
Spark позволяет распределять вычисления по кластеру
Поддержка как пакетной, так и потоковой обработки
Линейная масштабируемость при добавлении узлов
